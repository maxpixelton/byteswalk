# 微积分

## 映射和函数

一种数学工具的诞生一般是为了研究某类对象，解决某类问题。而微积分研究对象主要是 **函数**。但是在学习 **函数** 之前，要先掌握数学里非常基础同时也非常重要的概念：**映射**。

首先，下面是映射一个稍严谨的定义：

!!! Tip "1.1 映射的定义"

    设 $A$ 和 $B$ 是两个非空集合，如果按照某种对应关系 $f$，对于集合 $A$ 中的任何一个元素 a，在集合 $B$ 中都存在唯一的一个元素 b 与之对应。那么，这样的对应关系 $f$ ，称为集合 $A$ 到集合 $B$ 的映射，记做 $f: A \to B $。

上面的数学定义用大白话解释就是：<font color=red>映射表达了两类集合之间的关系，映射只能是一对一或多对一，不能一对多。**当映射的集合为非空数集的时候，这个映射就称为函数。** </font>对上面的定义而言，当集合 $A$ 和 $B$ 是两个非空数集的时候，这个映射 $f$ 被称为 **函数**

人工智能与函数有着千丝万缕的关系，比如对于图片的猫狗识别这种弱人工智能问题，本质上就是要找到猫狗的图片（集合 $A$）和对应的答案（集合 $B$）之间的关系，而猫狗的图片，和对应的答案在计算机中就是以【数】的形式存储的。

有哪些常用的【非空数集】呢 ？最常用的是实数域(1)这个【非空数集】，一般用 $R$ 来表示。定义在实数域上的函数就称为实函数。对于一个实函数，有两个变量，自变量和因变量。自变量就是自身在变化的量，因变量就是因为别人在变化而发生变化的量。对于 $f: A \to B$，显然 $A$ 是自变量，$B$ 因为 $A$ 而发生变化，所以 $B$ 是因变量。
{ .annotate }

1.  :man_raising_hand: 数学上的数域是从自然数开始，慢慢扩展的。从自然数到有理数，再到实数，虚数，四元数，数域的范围在不断扩大。实函数就是数集属于实数域的函数。
    { .annotate }


对于实数域上的实函数，大致分为三类：

- 一元函数

- 多元函数

- 向量函数

### 一元函数

一元函数的自变量和因变量只有一个值（也就是标量），从映射的角度上来看，就是 $f: R \to R$，比如下面这个数学函数就是一个简单的一元函数。
$$
f(x)=x^2
$$


### 多元函数
多元函数的自变量有多个值（也就是向量），它的因变量只有一个值（也就是标量），从映射的角度上来看，就是 $f: R^n \to R$，这里的 $R^n$ 表示 n 为实数空间。下面的数学公式就是一个简单的二元函数。
$$
f(x_1,x_2)=x_1^{2} + x_2^{2}
$$

### 向量函数
向量函数指的是自变量（输入）和因变量（输出）都是多个值（也就是向量），用映射表示就是 $f: R^n \to R^n$，比如：
$$
\begin{cases}
f(x_1, x_2) = f(f_1, f_2) \\\
f_1 = x_1 + x_2 \\\
f_2 = x^1
\end{cases}
$$

这个向量函数的输入是一个二维向量，输出的也是一个二维向量。下面的微积分就先从一元函数开始，一步步推广到多元函数，再到向量函数


## 一元函数

假设现在有一个函数 $f$，我们现在想研究函数 $f$ 在点 $a$ 的性质。

首先，我们都知道点 $a$ 处的函数值等于 $f(a)$，那么除了这个信息外，我们还能通过其它信息来研究点 $a$ 的性质吗 ？微分就能让我们从其它的维度信息来研究这个函数的性质。这个维度信息就是 **导数**！

### 导数

一元函数的导数从图像上来看，描述的是通过这一点的 a 的 **切线的斜率**。

![一元函数的导数](https://shichuan-hao.github.io/images/math/the-derivative-of-a-function-of-one-variable.png)

比如上图研究的函数是 $f(x) = x^2$，红色的线过点 $(1, 1)$ 处的切线。导数就是这条切线的斜率。那么这条切线的斜率到底应该如何定义和计算呢 ？在数学上导数明确且严谨的定义如下：

!!! Tip "1.2 导数的定义"

    $$
    x^* 处的导数 = \lim_{t \to 0} \frac{f(x^* + t ) - f(x^*)}{t}
    $$

上面公式涉及道理 lim 这个极限过程。我们可以先将上面的极限过程几何化，以帮助我们理解：

![导数的 lim 极限过程 - 左导数](https://shichuan-hao.github.io/images/math/unary-function-lim-1.gif)

从上图中可以看到，红色的割线和原函数会产生两个交点。在割线缓慢向下旋转的过程中，这两个交点会越来越接近。当两个交点完全重合的时候，割线就变成了切线。

当然，这条割线也可以固定右边点反过来旋转，如下图所示：

![导数的 lim 极限过程 - 右导数](https://shichuan-hao.github.io/images/math/unary-function-lim-2.gif)

这两种方式得到的导数，也就是斜率是一样的。前面的叫做**左导数**，后面的叫做**右导数**。虽然在这里右导数和左导数相等，但是一般情况下，并不总有左导数等于右导数。如果左右导数不等，我们就称这个点不可导。比如 $y = |x|$ 在 $(0,0)$ 点处就不可导。

前面是从几何角度阐述了 lim 这个极限过程，那如何用数学的方式进行定义和计算这个极限值等于多少呢 ？仍然以 $y=x^2$ 为例，来尝试一下$(1,1)$点处的导数。根据【定义 1.2 中的公式】有：

$$
\lim_{t \to 0} \frac{(x + t)^2 - x^2}{t} = \lim_{t \to 0} \frac{t^2 - 2t}{t} = \lim_{t \to 0} (t + 2) = 2
$$

现在看来，这个计算很简单！没错，牛顿那个时候也是这么计算的，而且这个结果的确也是对的，但是仔细思考下就会发现这里面有逻辑问题。

首先，在第一个等号的右边，我们将 $t$ 当作一个不为 0 的数给约分了，在第二个等号的右边，又将 $t$ 当作 0 给处理了！那到底 $t$ 是不是 0 ？在牛顿所处的时代，他们没有直面这个问题，他们称 $t$ 为 **无穷小量**，很明显这个 **无穷小量** 在数学上不是自洽的。这个不自恰导致了数学史上的第二次危机！知道微积分发明一百年后，才由著名的数学家柯西和魏尔施特拉斯(1)解决。
{ .annotate }

1.  :man_raising_hand: 柯西提出的方法就是著名的 $\epsilon − \delta$ 方法，他巧妙的用数学的方式精确的定义了 lim 极限的过程。
    { .annotate }

回到导数的定义，将导数的公式做一点小小的变形：

$$
\lim_{t \to 0} \frac{f(x^* + t ) - f(x^*)}{t} = \lim_{t \to 0} \frac{f(x^* + t ) - f(x^*)}{(x^2 + t) - x^2}
$$

从上面公式可以看到，导数等于两个东西相除求商。其中分子是因变量的微小变化量，分母是自变量的微小变化量。我们用 $df$ 表示 $f$ 的微小变化量。$dx$ 表示 $x$ 的微小变化量。$d$ 表示 difference 的意思，也就是【差别】。于是我们把 $f$ 在 $x^*$ 处的到处记为：
$$
\left. \frac{df}{dx}\right |_{x=x^*}
$$

$df$,$dx$又称为【微分】(1)。不难看出，切线的斜率恰巧是这两个的很微小的变化量做商，所以导数有时候又叫做微商（微分的商）。一般的，当我们研究的函数是一元函数的时候$\left. \frac{df}{dx}\right |_{x=x^*}$，也可以简单记为 $f^'(x^*)$。
{ .annotate }
1.  :man_raising_hand: 这里的微分不是严谨的数学定义
    { .annotate }


### 导函数和高阶函数

对于任何一个点，我们都可以去求得这个点对应的导数，于是我们就得到了一个数集和另一个数集的关系，这个关系就成为 **导函数**。记为：
$$
\frac{df}{dx}
$$

既然这是一个函数，就意味着我们可以对这个函数继续求导函数：

$$
\frac{d}{dx}(\frac{df}{dx}) = \frac{d^2f}{dx^2}
$$

$\frac{d^2f}{dx^2}$ 被称为二阶导数。同理还可以求三阶导，四阶导（只有导函数存在才能求导，导函数不一定存在）。

导函数具有一定的物理意义，比如 $f(t)$ 表示的是在 $t$ 时刻的位移，那么 $\frac{df(t)}{dt}$ 表达的就是 t 时刻的瞬时速度。
$\frac{d^2f(t)}{dt^2}$ 表示的就是 t 时刻的加速度。


## 多元函数

求解多元函数的导函数之前，需要先引入偏导数的概念。由于人类只擅长于想象二维和三维的情况，因此就以二元函数为例。加黑色



